!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("pinia"));else if("function"==typeof define&&define.amd)define(["pinia"],t);else{var o="object"==typeof exports?t(require("pinia")):t(e.pinia);for(var s in o)("object"==typeof exports?exports:e)[s]=o[s]}}(self,(e=>(()=>{"use strict";var t={199:t=>{t.exports=e}},o={};function s(e){var r=o[e];if(void 0!==r)return r.exports;var n=o[e]={exports:{}};return t[e](n,n.exports,s),n.exports}s.d=(e,t)=>{for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{s.r(r),s.d(r,{PiniaStore:()=>i,State:()=>c,Store:()=>a,mushroomPinia:()=>n});var e=s(199);class t{static _instance;classToStateMemberNames=new Map;classToSetAccessorNames=new Map;classToGetAccessorNames=new Map;classToBothAccessorNames=new Map;classToMethodNames=new Map;idToPiniaStore=new Map;addStateMemberName(e,t){let o=this.classToStateMemberNames.get(e);o||(o=[],this.classToStateMemberNames.set(e,o)),o.push(t)}getStateMemberNames(e){const t=new Set;let o=e;for(;o;){const e=this.classToStateMemberNames.get(o);if(e)for(const o of e.reverse())t.add(o);o=Object.getPrototypeOf(o)}return Array.from(t).reverse()}addAccessorAndMethodNames(e){const t=new Set,o=new Set,s=new Set,r=new Set;let n=e;for(;n&&n.prototype;){const e=Reflect.ownKeys(n.prototype);for(const a of e.reverse())switch(this.getMethodType(n,a)){case"set":t.add(a);break;case"get":o.add(a);break;case"setget":s.add(a);break;case"method":r.add(a)}n=Object.getPrototypeOf(n)}t.size>0&&this.classToSetAccessorNames.set(e,Array.from(t).reverse()),o.size>0&&this.classToGetAccessorNames.set(e,Array.from(o).reverse()),s.size>0&&this.classToBothAccessorNames.set(e,Array.from(s).reverse()),r.size>0&&this.classToMethodNames.set(e,Array.from(r).reverse())}getSetAccessorNames(e){return this.classToSetAccessorNames.get(e)}getSymbolGetAccessorNames(e){return this.classToGetAccessorNames.get(e)?.filter((e=>"symbol"==typeof e))}getNonSymbolGetAccessorNames(e){return this.classToGetAccessorNames.get(e)?.filter((e=>"string"==typeof e))}getBothAccessorNames(e){return this.classToBothAccessorNames.get(e)}getSymbolMethodNames(e){return this.classToMethodNames.get(e)?.filter((e=>"symbol"==typeof e))}getNonSymbolMethodNames(e){return this.classToMethodNames.get(e)?.filter((e=>"string"==typeof e))}addPiniaStore(e,t){this.idToPiniaStore.set(e,t)}getPiniaStore(e){return this.idToPiniaStore.get(e)}storeIsCreated(e){return this.idToPiniaStore.has(e)}getMethodType(e,t){if("constructor"===t)return"constructor";const o=Object.getOwnPropertyDescriptor(e.prototype,t);return o.set&&!o.get?"set":!o.set&&o.get?"get":o.set&&o.get?"setget":!o.value||o.set||o.get?void 0:"method"}static get instance(){return t._instance||(t._instance=new t),t._instance}}class o{static consolePrintable=!0;static histories=[];static warn(e,t){o.histories.push({type:"warn",code:e,message:t}),o.consolePrintable&&console.warn(`(${e}) ${t}`)}static error(e,t){o.histories.push({type:"error",code:e,message:t}),o.consolePrintable&&console.error(`(${e}) ${t}`)}static throwError(e,t){throw o.histories.push({type:"throw",code:e,message:t}),o.consolePrintable?new Error(`(${e}) ${t}`):new Error}static getHistory(){return o.histories}static clearHistory(){o.histories.splice(0)}static toggleConsolePrintable(e){o.consolePrintable=e}}const n={install(t){const o=(0,e.createPinia)();t.use(o)}},a=function(s){return function(r){const n=t.instance;return n.addAccessorAndMethodNames(r),function(...t){const a=new r(...t),c=null==s?.id?r.name:"function"==typeof s.id?s.id.call(a,a):s.id;if(n.storeIsCreated(c))return o.warn("20001",`该Store (id: ${c}) 已经创建过，将返回该Store的实例！`),n.getPiniaStore(c);const i=n.getStateMemberNames(r.prototype);0===i.length&&o.throwError("29001",`该Store (${r.name}) 中无State！`);const f={};for(const e of i)f[e]=a[e];const l={},m=n.getNonSymbolGetAccessorNames(r);if(m)for(const e of m)l[e]=()=>a[e];const d={},u=n.getNonSymbolMethodNames(r);if(u)for(const e of u)d[e]=a[e].bind(a);const p=(0,e.defineStore)(c,{state:()=>f,getters:l,actions:d})();return function(e,t,o){for(const s of e)Reflect.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>o[s],set(e){o.$patch({[s]:e})}})}(i,a,p),function(e,t,o){const s=Reflect.ownKeys(t);for(const r of s)"symbol"!=typeof r&&-1!==e.indexOf(r)||Reflect.defineProperty(o,r,{enumerable:!0,configurable:!0,get:()=>t[r],set(e){t[r]=e}})}(i,a,p),function(e,t,o){if(e)for(const s of e)Reflect.defineProperty(o,s,{enumerable:!1,configurable:!0,set(e){t[s]=e}})}(n.getSetAccessorNames(r),a,p),function(e,t,o){if(e)for(const s of e)Reflect.defineProperty(o,s,{enumerable:!1,configurable:!0,get:()=>t[s],set(e){t[s]=e}})}(n.getBothAccessorNames(r),a,p),function(e,t,o){if(e)for(const s of e)Reflect.defineProperty(o,s,{enumerable:!1,configurable:!0,get:()=>t[s]})}(n.getSymbolGetAccessorNames(r),a,p),function(e,t,o){if(e)for(const s of e)Reflect.defineProperty(o,s,{enumerable:!1,configurable:!0,value:t[s]})}(n.getSymbolMethodNames(r),a,p),function(e,t){const o=["$id","$state","$patch","$reset","$subscribe","$onAction","$dispose"];for(const s of o)Reflect.defineProperty(e,s,{enumerable:!1,configurable:!0,value:t[s]})}(a,p),n.addPiniaStore(c,p),p}}},c=function(){return function(e,s){const r=t.instance;"symbol"!=typeof s?r.addStateMemberName(e,s.toString()):o.throwError("29002",`不能使用symbol作为State！Store: ${e.constructor.name}, State: ${String(s)}`)}},i=class{}})(),r})()));