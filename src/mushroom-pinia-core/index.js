!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("pinia"));else if("function"==typeof define&&define.amd)define(["pinia"],t);else{var r="object"==typeof exports?t(require("pinia")):t(e.pinia);for(var o in r)("object"==typeof exports?exports:e)[o]=r[o]}}(self,(e=>(()=>{"use strict";var t={199:t=>{t.exports=e}},r={};function o(e){var s=r[e];if(void 0!==s)return s.exports;var n=r[e]={exports:{}};return t[e](n,n.exports,o),n.exports}o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return(()=>{o.r(s),o.d(s,{PiniaStore:()=>d,State:()=>u,Store:()=>f,mushroomPinia:()=>l});var e=o(199);class t{static _instance;static originalClassPropName="__mp_class";static originalInstancePropName="__mp_instance";classToStateMemberNames=new Map;classToSetAccessorNames=new Map;classToGetAccessorNames=new Map;classToBothAccessorNames=new Map;classToMethodNames=new Map;idToPiniaStore=new Map;addStateMemberName(e,t){let r=this.classToStateMemberNames.get(e);r||(r=[],this.classToStateMemberNames.set(e,r)),r.push(t)}getStateMemberNames(e){const t=new Set;let r=e;for(;r;){const e=this.classToStateMemberNames.get(r);if(e)for(const r of e.reverse())t.add(r);r=Object.getPrototypeOf(r)}return Array.from(t).reverse()}addAccessorAndMethodNames(e){const t=new Set,r=new Set,o=new Set,s=new Set;let n=e;for(;n&&n.prototype;){const e=Reflect.ownKeys(n.prototype);for(const a of e.reverse())switch(this.getMethodType(n,a)){case"set":t.add(a);break;case"get":r.add(a);break;case"setget":o.add(a);break;case"method":s.add(a)}n=Object.getPrototypeOf(n)}t.size>0&&this.classToSetAccessorNames.set(e,Array.from(t).reverse()),r.size>0&&this.classToGetAccessorNames.set(e,Array.from(r).reverse()),o.size>0&&this.classToBothAccessorNames.set(e,Array.from(o).reverse()),s.size>0&&this.classToMethodNames.set(e,Array.from(s).reverse())}getSetAccessorNames(e){return this.classToSetAccessorNames.get(e)}getSymbolGetAccessorNames(e){return this.classToGetAccessorNames.get(e)?.filter((e=>"symbol"==typeof e))}getNonSymbolGetAccessorNames(e){return this.classToGetAccessorNames.get(e)?.filter((e=>"string"==typeof e))}getBothAccessorNames(e){return this.classToBothAccessorNames.get(e)}getSymbolMethodNames(e){return this.classToMethodNames.get(e)?.filter((e=>"symbol"==typeof e))}getNonSymbolMethodNames(e){return this.classToMethodNames.get(e)?.filter((e=>"string"==typeof e))}addPiniaStore(e,t){this.idToPiniaStore.set(e,t)}getPiniaStore(e){return this.idToPiniaStore.get(e)}storeIsCreated(e){return this.idToPiniaStore.has(e)}getMethodType(e,t){if("constructor"===t)return"constructor";const r=Object.getOwnPropertyDescriptor(e.prototype,t);return r.set&&!r.get?"set":!r.set&&r.get?"get":r.set&&r.get?"setget":!r.value||r.set||r.get?void 0:"method"}static get instance(){return t._instance||(t._instance=new t),t._instance}}class r{static consolePrintable=!0;static histories=[];static warn(e,t){r.histories.push({type:"warn",code:e,message:t}),r.consolePrintable&&console.warn(`(${e}) ${t}`)}static error(e,t){r.histories.push({type:"error",code:e,message:t}),r.consolePrintable&&console.error(`(${e}) ${t}`)}static throwError(e,t){throw r.histories.push({type:"throw",code:e,message:t}),r.consolePrintable?new Error(`(${e}) ${t}`):new Error}static getHistory(){return r.histories}static clearHistory(){r.histories.splice(0)}static toggleConsolePrintable(e){r.consolePrintable=e}}function n(e,t){var r;return e="object"==typeof(r=e)&&null!==r?e:Object.create(null),new Proxy(e,{get:(e,r,o)=>"key"===r?Reflect.get(e,r,o):Reflect.get(e,r,o)||Reflect.get(t,r,o)})}function a(e,{storage:t,serializer:r,key:o,debug:s}){try{const s=null==t?void 0:t.getItem(o);s&&e.$patch(null==r?void 0:r.deserialize(s))}catch(e){s&&console.error(e)}}function i(e,{storage:t,serializer:r,key:o,paths:s,debug:n}){try{const n=Array.isArray(s)?function(e,t){return t.reduce(((t,r)=>{const o=r.split(".");return function(e,t,r){return t.slice(0,-1).reduce(((e,t)=>/^(__proto__)$/.test(t)?{}:e[t]=e[t]||{}),e)[t[t.length-1]]=r,e}(t,o,function(e,t){return t.reduce(((e,t)=>null==e?void 0:e[t]),e)}(e,o))}),{})}(e,s):e;t.setItem(o,r.serialize(n))}catch(e){n&&console.error(e)}}function c(e={}){return t=>{const{auto:r=!1}=e,{options:{persist:o=r},store:s}=t;if(!o)return;const c=(Array.isArray(o)?o.map((t=>n(t,e))):[n(o,e)]).map((({storage:t=localStorage,beforeRestore:r=null,afterRestore:o=null,serializer:n={serialize:JSON.stringify,deserialize:JSON.parse},key:a=s.$id,paths:i=null,debug:c=!1})=>{var l;return{storage:t,beforeRestore:r,afterRestore:o,serializer:n,key:(null!=(l=e.key)?l:e=>e)(a),paths:i,debug:c}}));s.$persist=()=>{c.forEach((e=>{i(s.$state,e)}))},s.$hydrate=({runHooks:e=!0}={})=>{c.forEach((r=>{const{beforeRestore:o,afterRestore:n}=r;e&&(null==o||o(t)),a(s,r),e&&(null==n||n(t))}))},c.forEach((e=>{const{beforeRestore:r,afterRestore:o}=e;null==r||r(t),a(s,e),null==o||o(t),s.$subscribe(((t,r)=>{i(r,e)}),{detached:!0})}))}}c();const l={install(t){const r=(0,e.createPinia)();t.use(r),r.use(c({storage:localStorage,key:e=>`__mp_persisted_${e}`}))}},f=function(o){return function(s){const n=t.instance;n.addAccessorAndMethodNames(s);const a=function(...a){const i=new s(...a),c=null==o?.id?s.name:"function"==typeof o.id?o.id.call(i,i):o.id;if(n.storeIsCreated(c))return r.warn("20001",`该Store (id: ${c}) 已经创建过，将返回该Store的实例！`),n.getPiniaStore(c);const l=n.getStateMemberNames(s.prototype);0===l.length&&r.throwError("29001",`该Store (${s.name}) 中无State！`);const f={};for(const e of l)f[e]=i[e];const u={},d=n.getNonSymbolGetAccessorNames(s);if(d)for(const e of d)u[e]=()=>i[e];const m={},p=n.getNonSymbolMethodNames(s);if(p)for(const e of p)m[e]=i[e].bind(i);(0,e.getActivePinia)()||(0,e.setActivePinia)((0,e.createPinia)());const g=(0,e.defineStore)(c,{state:()=>f,getters:u,actions:m,persist:o?.persist})();return function(e,t,r){for(const o of e)Reflect.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>r[o],set(e){r.$patch({[o]:e})}})}(l,i,g),function(e,t,r){const o=Reflect.ownKeys(t);for(const s of o)"symbol"!=typeof s&&-1!==e.indexOf(s)||Reflect.defineProperty(r,s,{enumerable:!0,configurable:!0,get:()=>t[s],set(e){t[s]=e}})}(l,i,g),function(e,t,r){if(e)for(const o of e)Reflect.defineProperty(r,o,{enumerable:!1,configurable:!0,set(e){t[o]=e}})}(n.getSetAccessorNames(s),i,g),function(e,t,r){if(e)for(const o of e)Reflect.defineProperty(r,o,{enumerable:!1,configurable:!0,get:()=>t[o],set(e){t[o]=e}})}(n.getBothAccessorNames(s),i,g),function(e,t,r){if(e)for(const o of e)Reflect.defineProperty(r,o,{enumerable:!1,configurable:!0,get:()=>t[o]})}(n.getSymbolGetAccessorNames(s),i,g),function(e,t,r){if(e)for(const o of e)Reflect.defineProperty(r,o,{enumerable:!1,configurable:!0,value:t[o]})}(n.getSymbolMethodNames(s),i,g),function(e,t){const r=["$id","$state","$patch","$subscribe","$onAction","$hydrate","$persist"];for(const o of r)Reflect.defineProperty(e,o,{enumerable:!1,configurable:!0,value:t[o]})}(i,g),n.addPiniaStore(c,g),Reflect.defineProperty(g,t.originalInstancePropName,{enumerable:!1,configurable:!1,get:()=>i}),g},i=Reflect.ownKeys(s);for(const e of i)"length"!==e&&"name"!==e&&Reflect.defineProperty(a,e,Reflect.getOwnPropertyDescriptor(s,e));return Reflect.defineProperty(a,t.originalClassPropName,{enumerable:!1,configurable:!1,get:()=>s}),a}},u=function(){return function(e,o){const s=t.instance;"symbol"!=typeof o?s.addStateMemberName(e,o.toString()):r.throwError("29002",`不能使用symbol作为State！Store: ${e.constructor.name}, State: ${String(o)}`)}},d=class{}})(),s})()));